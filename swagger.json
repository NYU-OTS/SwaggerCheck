{
	"swagger": "2.0",
	"info": {
		"title": "TFS Automation with Slack Tool Integration and Others (TASTIO)",
		"description": "TFSbot",
		"version": "1.0.0"
	},
	"host": "localhost",
	"paths": {
		"/Slack/Channels": {
			"get": {
				"summary": "Get all Slack channels",
				"description": "Retrieves a list of registered Slack channels",
				"produces": [
					"application/json"
				],
				"responses": {
					"200": {
						"description": "A collection of Slack channels",
						"schema": {
							"type": "array",
							"items": {
								"type": "string"
							}
						}
					}
				}
			}
		},
		"/TFS/ProjectInfo": {
			"get": {
				"summary": "Get information for all projects",
				"description": "Retrieves information on all registered projects",
				"produces": [
					"application/json"
				],
				"responses": {
					"200": {
						"description": "A collection of ProjectInfo objects",
						"schema": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/ProjectInfo"
							}
						}
					}
				}
			}
		},
		"/TFS/Subscriptions": {
			"post": {
				"summary": "Register a project for subscriptions",
				"description": "Adds the project to the list of registered projects and creates subscriptions for the project",
				"consumes": [
					"application/json"
				],
				"parameters": [
					{
						"name": "Project information",
						"in": "body",
						"description": "Information about the project",
						"required": true,
						"schema": {
							"$ref": "#/definitions/ProjectInfo"
						}
					}
				],
				"responses": {
					"201": {
						"description": "Created"
					},
					"400": {
						"description": "Invalid input"
					},
					"404": {
						"description": "Project or channel doesn't exist"
					}
				}
			}
		},
		"/TFS/Events/WorkItemUpdated": {
			"post": {
				"summary": "A work item has been updated",
				"description": "Posts a message to Slack depending on the type of update",
				"consumes": [
					"application/json"
				],
				"parameters": [
					{
						"name": "Work Item",
						"in": "body",
						"description": "Information about the work item",
						"required": true,
						"schema": {
							"$ref": "#/definitions/WorkItemHookModel"
						}
					}
				],
				"responses": {
					"200": {
						"description": "OK"
					}
				}
			}
		},
		"/TFS/Events/PullRequestCreated": {
			"post": {
				"summary": "A pull request has been created",
				"description": "Moves the corresponding work item to Review",
				"consumes": [
					"application/json"
				],
				"parameters": [
					{
						"name": "Pull Request",
						"in": "body",
						"description": "Information about the pull request",
						"required": true,
						"schema": {
							"$ref": "#/definitions/PullRequestHookModel"
						}
					}
				],
				"responses": {
					"200": {
						"description": "OK"
					}
				}
			}
		},
		"/TFS/Events/PullRequestUpdated": {
			"post": {
				"summary": "A pull request has been updated",
				"description": "Changes the corresponding work item's state depending on the type of update",
				"consumes": [
					"application/json"
				],
				"parameters": [
					{
						"name": "Pull Request",
						"in": "body",
						"description": "Information about the pull request and event",
						"required": true,
						"schema": {
							"$ref": "#/definitions/PullRequestHookModel"
						}
					}
				],
				"responses": {
					"200": {
						"description": "OK"
					}
				}
			}
		}
	},
	"definitions": {
		"ProjectInfo": {
			"type": "object",
			"required": [
				"ProjectName",
				"SlackChannel",
				"SlackUrl"
			],
			"properties": {
				"ProjectName": {
					"type": "string"
				},
				"SlackChannel": {
					"type": "string"
				},
				"SlackUrl": {
					"type": "string"
				}
			}
		},
		"WorkItemHookModel": {
			"type": "object",
			"properties": {
				"Resource": {
					"$ref": "#/definitions/WorkItemResource"
				}
			}
		},
		"RevisionFields": {
			"type": "object",
			"properties": {
				"AssignedTo": {
					"type": "string"
				},
				"ProjectName": {
					"type": "string"
				},
				"State": {
					"type": "string"
				},
				"Tags": {
					"type": "string"
				},
				"Title": {
					"type": "string"
				}
			}
		},
		"Revision": {
			"type": "object",
			"properties": {
				"Fields": {
					"$ref": "#/definitions/RevisionFields"
				},
				"Id": {
					"type": "number"
				}
			}
		},
		"FieldAttribute": {
			"type": "object",
			"properties": {
				"OldState": {
					"type": "string"
				},
				"NewState": {
					"type": "string"
				}
			}
		},
		"ResourceFields": {
			"type": "object",
			"properties": {
				"AssignedTo": {
					"$ref": "#/definitions/FieldAttribute"
				},
				"State": {
					"$ref": "#/definitions/FieldAttribute"
				}
			}
		},
		"WorkItemResource": {
			"type": "object",
			"properties": {
				"Fields": {
					"$ref": "#/definitions/ResourceFields"
				},
				"Rev": {
					"type": "number"
				},
				"RevisedBy": {
					"type": "object",
					"properties": {
						"Name": {
							"type": "string"
						}
					}
				},
				"Revision": {
					"$ref": "#/definitions/Revision"
				}
			}
		},
		"PullRequestResource": {
			"type": "object",
			"properties": {
				"Description": {
					"type": "string"
				},
				"SourceRefName": {
					"type": "string"
				}
			}
		},
		"PullRequestHookModel": {
			"type": "object",
			"properties": {
				"Message": {
					"type": "object",
					"properties": {
						"Text": {
							"type": "string"
						}
					}
				},
				"Resource": {
					"$ref": "#/definitions/PullRequestResource"
				}
			}
		}
	}
}